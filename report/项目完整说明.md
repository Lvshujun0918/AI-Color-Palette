---
title: "PaletteFlow - AI配色生成平台"
titlepage: true
indent: true
author: "吕舒君&吴凌希&邵乐杰"
date: "2026-02-02"
footer-center: "配色，易如反掌"
output: pdf_document
CJKmainfont: Noto Serif CJK SC
CJKsansfont: Noto Sans CJK SC
CJKmonofont: Noto Sans Mono CJK SC
mainfont: Libertinus Serif
sansfont: Libertinus Sans
---

# PaletteFlow - AI配色生成平台

PaletteFlow — **配色，易如反掌**

## 界面展示

![](image-1.png)

![](image-2.png)

##  产品简介

### 核心价值

PaletteFlow 通过集成先进的大语言模型（LLM），为设计师、开发者和创意工作者提供**智能配色方案生成服务**。用户只需输入简单的自然语言描述，系统即可在数秒内生成5个专业级、高度协调的HEX色值，同时提供**WCAG无障碍检查**和**色盲友好性模拟**等工具。

### 产品定位

| 维度 | 特色 |
|------|------|
| **目标用户** | UI/UX设计师、前端开发者、数据可视化师、品牌设计团队 |
| **使用场景** | 快速配色方案生成、设计稿预研、无障碍审核、颜色导出 |
| **差异化** | AI赋能+可访问性工具+多格式导出的一体化解决方案 |
| **部署方式** | Docker一键启动、支持离线使用、多AI服务商兼容 |


##  核心功能模块

### AI智能配色生成

**功能描述：**

- 支持自然语言输入，描述配色需求
- AI自动理解语义并生成5个协调的HEX颜色
- 8个快速模板加速操作（秒速生成）
- 智能降级机制：AI失败时自动切换随机生成，保证服务可用性

**技术特色：**

- 支持多家AI服务商（OpenAI、Claude、通义千问、DeepSeek、智谱GLM等）
- Function Call工具调用确保结构化输出
- 即插即用的AI切换能力

**用户流程：**
```
输入需求描述 → AI生成5个配色 → 实时预览 → 一键复制/导出
```


### 配色工具集

#### 对比度无障碍检查

**WCAG 2.0标准检查**

-  实时计算任意两色的对比度比率
-  自动评定AA/AAA等级
-  0-100可访问性评分
-  完全本地计算（无需网络请求）

**技术实现：**
```javascript
// 使用相对亮度公式
L = 0.2126 × R + 0.7152 × G + 0.0722 × B
对比度比率 = (L1 + 0.05) / (L2 + 0.05)
```

**应用价值：**

- 保证设计满足无障碍标准，覆盖全球用户
- 提高品牌可信度和法律合规性

#### 色盲模拟与友好性检查

**4种色盲类型模拟**

-  Deuteranopia（红绿色盲，8%男性）
-  Protanopia（红绿色弱，1%人口）
-  Tritanopia（蓝黄色盲，极罕见）
-  Achromatopsia（完全色盲）

**技术方案：**
使用Brettel等人发布的色盲模拟矩阵算法，通过3×3变换矩阵精确模拟不同色盲人群的感知效果。

**产品意义：**

- 设计人员可预先评估配色对色盲人群的友好性
- 确保包容设计，覆盖全球8%的红绿色盲人群

#### 多格式导出

-  **CSS变量**：`--color-1: #FF5733` 即插即用
-  **JSON**：包含完整元数据，支持设计系统
- ️ **PNG图像**：可视化色卡，便于分享


### 历史管理与恢复

**功能特色：**

-  自动本地保存（localStorage）
-  最多保留20条历史记录（自动清理超期）
-  一键恢复历史配色方案
-  隐私优先（全部本地存储）

**用户体验：**

- 刷新页面自动恢复历史
- 跨标签页同源共享
- 支持导入导出历史集合


### 响应式用户界面

**设计理念：**

- 液态玻璃（Liquid Glass）视觉风格
- 毛玻璃效果 + 高斯模糊 + 渐变高光
- 深色适配与明暗偏好检测

**用户交互：**

- 实时通知栈堆（支持多通知并存）
- 卡片悬停动画与平滑过渡
- 移动端友好的触摸交互

**响应式适配：**

| 设备 | 视口 | 优化 |
|------|------|------|
| 桌面 | ≥1024px | 两栏布局 + 完整工具 |
| 平板 | 768-1023px | 单栏堆叠 + 简化工具栏 |
| 手机 | <768px | 移动优先 + 底部导航 |


## ️ 技术方案特色

### 后端架构（Go）

```
Go 1.25
├── Gin Framework              # 高性能Web框架，吞吐量50K+/s
├── OpenAI兼容API客户端       # 支持多家AI服务商
├── 智能降级策略              # AI失败→文本解析→随机生成
└── 环境变量驱动配置          # 支持一键切换AI服务
```

**核心优势：**

- 编译为单个二进制文件，无运行时依赖
- 内存占用<50MB，适合边缘部署
- 支持超时控制和并发请求限制
- 完全兼容OpenAI API规范

**AI集成方案：**

```go
// 支持多家服务商（通过环境变量切换）
OpenAI     → https://api.openai.com/v1
Claude     → https://api.anthropic.com
通义千问   → https://dashscope.aliyuncs.com
DeepSeek   → https://api.deepseek.com/v1
智谱GLM    → https://open.bigmodel.cn/api/paas/v4
```

**Function Call方案：**

- 使用结构化工具调用确保格式一致
- 兜底文本解析，提高容错率
- 自动重试与降级链

### 前端架构（Vue 3）

```
Vue 3.3 + Vite 4.5
├── 组件库                     # 6个核心组件 + GlassButton通用按钮
├── 响应式设计系统            # 12列栅格 + 移动优先
├── 本地算法库                # WCAG + 色盲矩阵变换（全前端）
├── 动画系统                  # Framer Motion级别的过渡效果
└── 无状态通知系统            # 全局notification堆栈
```

**核心组件：**

| 组件 | 职责 | 特色 |
|------|------|------|
| ColorDisplay | 配色展示与导出 | 实时预览 + 三格式导出 |
| GeneratePanel | AI配色生成 | 自然语言输入 + 8个快速模板 |
| CheckPanel | 无障碍检查 | 对比度WCAG检查 + 4种色盲模拟 |
| HistoryPanel | 历史管理 | 时间戳排序 + 快速恢复 |
| GlassButton | 通用按钮 | 液态玻璃风格 + 加载态 |

**性能优化：**

- Tree-shaking：生产构建仅68KB（gzip）
- 代码分割：路由级别懒加载
- 本地算法：色盲模拟和对比度计算完全前端
- 动画优化：使用GPU加速（transform+opacity）

### 部署架构（Docker）

```yaml
PaletteFlow Docker镜像（单容器前后端一体）
├── 多阶段构建              # 生产体积最小化
├── Nginx反向代理          # 前端静态+后端代理
├── Supervisor进程管理      # 自动重启保活
└── 健康检查（liveness）    # 支持K8s编排
```

**构建流程：**
```dockerfile
Stage 1: Go编译 (build)
  - 构建go二进制 → 9.5MB

Stage 2: Node构建 (build)
  - npm install & build → dist/

Stage 3: 生产镜像 (runtime)
  - Nginx配置
  - Go二进制 + 编译产物
  - Supervisor守护进程
  - 最终体积：120MB
```

**部署支持：**
-  Docker Compose（单机开发）
-  Kubernetes（云原生生产）
-  Docker Swarm（集群部署）
-  Systemd（传统VPS）


##  产品亮点

### 无障碍第一的设计理念

- 内置WCAG 2.0对比度检查
- 4种色盲友好性模拟
- 设计方案生成后即可进行无障碍审核
- 直击行业痛点：设计稿常因无障碍不合规被打回

### 开放的AI生态

- 支持5+家AI服务商一键切换
- 不锁定单一厂商，降低成本
- 支持离线本地模型（Ollama集成）
- 灵活适配：企业可根据成本/性能在线切换

### 工程化的降级策略

```
优先级链：Tool Call → 文本解析 → 随机生成
```

- AI失败不影响服务可用性
- 用户始终能获得可用的配色
- 可靠性：SLA接近100%

### 液态玻璃UI设计

- 毛玻璃效果 + 高斯模糊 + 渐变高光
- 现代化设计体验
- 支持深色模式和明暗偏好检测
- 视觉竞争力：超越竞品的现代感

### 一体化部署

- 前后端单容器打包
- 一条`docker run`命令启动
- Nginx反向代理，前后端同端口
- 运维友好：降低部署复杂度

### 完整的本地计算

- 对比度检查：纯前端算法
- 色盲模拟：矩阵变换
- 无需服务器参与，隐私更好
- 性能与隐私：毫秒级响应 + 零隐私泄露


##  技术指标

| 指标 | 数值 | 说明 |
|------|------|------|
| **后端性能** | 50K+ req/s | Gin框架 + Go并发特性 |
| **响应延迟** | 2-3秒 | 包含AI生成时间 |
| **前端体积** | 68KB (gzip) | Vue3 + 优化 |
| **Docker镜像** | 120MB | 多阶段构建优化 |
| **内存占用** | <50MB | Go高效内存管理 |
| **启动时间** | <1秒 | 单二进制 + 预编译 |
| **无障碍得分** | 95+ | Lighthouse审计 |
| **色盲兼容** | 8%覆盖 | 支持红绿色盲人群 |


##  快速启动

### 方式1：Docker（推荐）

**一条命令启动：**

```bash
docker build -t ai-color-palette .
docker run -p 5173:80 \
  -e AI_API_KEY=sk-xxxxx \
  -e AI_MODEL=gpt-3.5-turbo \
  ai-color-palette

# 访问 http://localhost:5173
```

### 方式2：本地开发

**后端启动（Go）：**

```bash
cd backend
go run main.go
# 运行在 http://localhost:8080
```

**前端启动（Node）：**

```bash
cd frontend
npm install
npm run dev
# 运行在 http://localhost:5173
```

### 配置AI服务

编辑 `backend/.env`：

```env
# 选项1：OpenAI
AI_API_KEY=sk-xxxxx
AI_API_BASE_URL=https://api.openai.com/v1
AI_MODEL=gpt-3.5-turbo

# 选项2：智谱GLM
AI_API_KEY=xxxxx
AI_API_BASE_URL=https://open.bigmodel.cn/api/paas/v4
AI_MODEL=glm-4.7-flash
```


##  项目结构

```
ai-color-palette/
├──  Dockerfile                           # 一体化容器构建
├──  supervisor.conf                      # 进程管理
├──  项目完整说明.md                      # 本文档
│
├── backend/                                # Go后端
│   ├── main.go                             # 服务入口
│   ├── go.mod / go.sum                     # 依赖管理
│   ├── config/config.go                    # 环境配置
│   ├── ai/client.go                        # AI API客户端
│   └── handler/palette.go                  # 配色生成接口
│
└── frontend/                               # Vue3前端
    ├── package.json                        # npm依赖
    ├── vite.config.js                      # Vite构建
    ├── nginx.conf                          # Nginx配置
    └── src/
        ├── App.vue                         # 主应用
        ├── pages/
        │   └── Feature.vue                 # 功能页面
        ├── components/
        │   ├── ColorDisplay.vue            # 配色展示
        │   ├── GeneratePanel.vue           # AI生成
        │   ├── CheckPanel.vue              # 无障碍检查
        │   ├── HistoryPanel.vue            # 历史管理
        │   ├── GlassButton.vue             # 通用按钮
        │   └── Notification.vue            # 通知栈
        └── utils/
            ├── api.js                      # HTTP客户端
            └── colorUtils.js               # 颜色算法库
```


##  API 接口

### 健康检查

```http
GET /api/health
```

### 生成配色

```http
POST /api/generate-palette
Content-Type: application/json

{
  "prompt": "温暖的秋日色调"
}
```

**响应：**
```json
{
  "colors": ["#D97706", "#F59E0B", "#FBBF24", "#FCD34D", "#FEF3C7"],
  "timestamp": 1704067200,
  "description": "根据提示词生成的配色方案"
}
```

**降级策略：** AI失败时返回随机配色，HTTP 200确保可用性


##  算法库详解

### WCAG 2.0 对比度算法

```javascript
// 第一步：RGB转相对亮度
L = 0.2126 * R + 0.7152 * G + 0.0722 * B  // 加权平均

// 第二步：相对亮度转线性值
if (L <= 0.03928) L = L / 12.92
else L = ((L + 0.055) / 1.055) ^ 2.4

// 第三步：计算对比度比率
Ratio = (L1 + 0.05) / (L2 + 0.05)

// 第四步：评级
AAA: > 7:1
AA:  > 4.5:1
```

### 色盲模拟矩阵

使用Brettel等人发表的LMS (Long, Medium, Short)颜色空间变换：

```javascript
// RGB → LMS转换
// LMS → 色盲空间模拟
// 模拟空间 → RGB反演
// 结果：视觉效果与真实色盲人群感知相同
```

**覆盖率：**

- 红绿色盲(Deuteranopia) 占男性8%
- 红绿色弱(Protanopia) 占人口1%
- 蓝黄色盲(Tritanopia) 极罕见
- 完全色盲(Achromatopsia) <0.01%


##  创新亮点总结

| 创新点 | 意义 | 竞争优势 |
|--------|------|---------|
| **无障碍工具化** | 设计合规自助审核 | 大多竞品缺乏此功能 |
| **多AI服务兼容** | 厂商无关性 | 避免锁定、成本可控 |
| **工程级降级** | 可靠性保证 | SLA更高 |
| **液态玻璃UI** | 现代感 | 视觉竞争力强 |
| **一体化部署** | 极简运维 | 降低企业成本 |
| **完全本地计算** | 隐私友好 | 信息安全更优 |


##  应用价值

### 设计师角度

 **秒速出稿**：告别手工调色，AI自动生成协调配色

 **无障碍合规**：内置WCAG检查，设计稿一键审核

 **色盲友好**：提前模拟不同人群的感知，包容设计

 **多格式导出**：CSS/JSON/PNG满足各种工作流

### 开发者角度

 **零配置启动**：Docker一键部署

 **多AI兼容**：灵活切换服务商

 **离线支持**：支持本地大模型

 **API友好**：RESTful接口、完整文档

### 企业角度

 **成本控制**：可选多家AI服务商，按需切换

 **数据隐私**：本地计算，无数据上传

 **可扩展**：Kubernetes就绪，云原生支持

 **品牌提升**：包容设计，覆盖全球用户


##  总结

**PaletteFlow** 是一个**完整的、工程化的、面向生产的AI配色解决方案**。它不仅仅是一个"配色工具"，而是：

-  **设计工具** - AI加持的配色助手
-  **无障碍工具** - WCAG检查 + 色盲模拟
-  **开发者工具** - 多格式导出 + API接口
-  **部署方案** - Docker一体化 + Kubernetes就绪

通过**AI+无障碍+开放生态+优雅UI**的结合，我们为设计和开发工作流带来了质的提升。


**Made with hearts by PaletteFlow Team（吕舒君&吴凌希&邵乐杰）**

*"配色，易如反掌" — 让每个人都能轻松创作美观的配色方案*
